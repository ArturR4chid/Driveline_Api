const db = require('../config/db');
exports.getAll = (req, res) => { db.query('SELECT * FROM empresas', (err, results) => { if (err) return res.status(500).send(err); res.json(results); }); };
exports.getById = (req, res) => { const { id } = req.params; db.query('SELECT * FROM empresas WHERE id = ?', [id], (err, results) => { if (err) return res.status(500).send(err); res.json(results[0]); }); };
exports.create = (req, res) => { const { nome, cnpj, endereco } = req.body; db.query('INSERT INTO empresas (nome, cnpj, endereco) VALUES (?, ?, ?)', [nome, cnpj, endereco], (err, result) => { if (err) return res.status(500).send(err); res.json({ message: 'Empresa criada com sucesso!', id: result.insertId }); }); };
exports.update = (req, res) => { const { id } = req.params; const { nome, cnpj, endereco } = req.body; db.query('UPDATE empresas SET nome=?, cnpj=?, endereco=? WHERE id=?', [nome, cnpj, endereco, id], (err) => { if (err) return res.status(500).send(err); res.json({ message: 'Empresa atualizada com sucesso!' }); }); };
exports.delete = (req, res) => { const { id } = req.params; db.query('DELETE FROM empresas WHERE id=?', [id], (err) => { if (err) return res.status(500).send(err); res.json({ message: 'Empresa deletada com sucesso!' }); }); };